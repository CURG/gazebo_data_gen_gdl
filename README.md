# gazebo_data_gen_gdl

Use the programs in this repo to generate simulated kinnect images based graspit's saved grasps.

Note: Don't forget to source _setup.bash_ and _devel/setup.bash_ (or _setup.zsh_ for the adventurous)!
```source ../setup.bash``` 
```source devel/setup.bash```

## Re-making: 
```source /opt/ros/hydro/setup.bash```
```rm -rf build devel```
```source devel/setup.bash```

## Generating rgbd data from grasps: 
Using Gazebo:
* Start gazebo: ```roslaunch gazebo_simulate_kinect init_world.launch```. Leave this terminal tab open in the background.
* Run```build_training_data.py``` in *src/gazebo_simulate_kinnect* in a new terminal. This program searches through   the grasps in *../data/grasps/* (generated by graspit) and creates a training dataset (a .h5 file) for each object type in *../data/rgbd_images/DIST_TO_CAMERA-m_DATE/*. Each dataset contains rgdb patches, full rgbd images, etc. for each grasp generated by graspit. 

Cleaning up h5's:

__Note: make sure to change the dataset location in each of the following .py's mentioned__

* Run ```aggregate_output_learn_fingertips.py``` in *src/gazebo_simulate_kinnect*.  Bins all of the h5 grasps, and aggregates into one single h5 file (```out.h5```).
* Run ```condense_labels.py``` in *src/gazebo_simulate_kinnect*. Throws away empty and small bins of grasp types. Outputs into ```out_condensed.h5```.

## Next step in pipeline:
[pylearn_classifier_gdl](https://github.com/CURG/pylearn_classifier_gdl)

